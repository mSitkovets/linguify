<% if notice %>
  <aside id="notice"><%= notice %></aside>
<% end %>

<h1>Quizzes</h1>

<% if session[:user_id] && User.find(session[:user_id]).user_type == 1 %> 
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>User</th>
      <th>Difficulty level</th>
      <th>Attempts</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @quizzes.each do |quiz| %>
      <tr>
        <td><%= quiz.title %></td>
        <td><%= quiz.description %></td>
        <td><%= quiz.user_id %></td>
        <td><%= quiz.difficulty_level %></td>
        <td><%= link_to 'Show', quiz %></td>
        <td><%= link_to 'Edit', edit_quiz_path(quiz) %></td>
        <td><%= link_to 'Destroy', quiz, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= button_to 'New Quiz', new_quiz_path(locale: I18n.locale), method: :get, class: "new_quiz" %>

<h1>Number of Quizzes per Language</h1>

<table>
  <thead>
    <tr>
      <th>Language</th>
      <th>Number of Quizzes</th>
      <th colspan="2"></th>
    </tr>
  </thead>

  <tbody>
    <% @quizzes_per_language.each do |key, value| %>
      <tr>
        <td><%= key %></td>
        <td><%= value %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% elsif User.find(session[:user_id]).user_type == 0 %>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Difficulty level</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @specific_users_quizzes.each do |quiz| %>
      <tr>
        <td><%= quiz.title %></td>
        <td><%= quiz.description %></td>
        <td><%= quiz.difficulty_level %></td>
        <td><%= link_to 'Show', quiz %></td>
        <td><%= link_to 'Edit', edit_quiz_path(quiz) %></td>
        <td><%= link_to 'Destroy', quiz, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= button_to 'New Quiz', new_quiz_path(locale: I18n.locale), method: :get, class: "new_quiz" %>
<% end %>

